{
  "name": "tmp-promise",
  "version": "1.0.2",
  "description": "The tmp package with promises support and disposers.",
  "main": "index.js",
  "scripts": {
    "test": ""
  },
  "keywords": [
    "tmp",
    "promise",
    "tempfile",
    "mkdtemp",
    "mktemp"
  ],
  "author": {
    "name": "Benjamin Gruenbaum"
  },
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "git://github.com/benjamingr/tmp-promise.git"
  },
  "dependencies": {
    "bluebird": "^3.3.3",
    "tmp": "0.0.28"
  },
  "readme": "# tmp-promise\r\n\r\nA simple utility for creating temporary files or directories.\r\n\r\nThe [tmp](https://github.com/raszi/node-tmp) package with promises support.\r\n\r\nThis documentation is mostly copied from that package's - but with promise usage instead of callback usage adapted.\r\n\r\n## Installation\r\n\r\n    npm i tmp-promise\r\n\r\n## About\r\n\r\nThis adds promises support to a [widely used library][2]. This package is used to create temporary files and directories in a [Node.js][1] environment.\r\n\r\ntmp-promise offers both an asynchronous and a synchronous API. For all API calls, all\r\nthe parameters are optional.\r\n\r\nInternally, tmp uses crypto for determining random file names, or, when using templates, a six letter random identifier. And just in case that you do not have that much entropy left on your system, tmp will fall back to pseudo random numbers.\r\n\r\nYou can set whether you want to remove the temporary file on process exit or not, and the destination directory can also be set.\r\n\r\ntmp-promise also uses promise disposers to provide a nice way to perform cleanup when you're done working with the files.\r\n\r\n## Usage (API Reference)\r\n\r\n### Asynchronous file creation\r\n\r\nSimple temporary file creation, the file will be closed and unlinked on process exit.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.file().then(o => {  \r\n  console.log(\"File: \", o.path);\r\n  console.log(\"Filedescriptor: \", o.fd);\r\n  \r\n  // If we don't need the file anymore we could manually call cleanup\r\n  // But that is not necessary if we didn't pass the keep option because the library\r\n  // will clean after itself.\r\n  o.cleanup();\r\n});\r\n```\r\n\r\nSimple temporary file creation with a disposer:\r\n\r\n```js\r\ntmp.withFile(o => {\r\n  console.log(\"File: \", o.path);\r\n  console.log(\"Filedescriptor: \", o.fd);\r\n  // the file remains opens until the below promise resolves\r\n  return somePromiseReturningFn();\r\n}).then(v => {\r\n  // file is closed here automatically, v is the value of somePromiseReturningFn\r\n});\r\n```\r\n\r\n\r\n### Synchronous file creation\r\n\r\nA synchronous version of the above.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\nvar tmpobj = tmp.fileSync();\r\nconsole.log(\"File: \", tmpobj.name);\r\nconsole.log(\"Filedescriptor: \", tmpobj.fd);\r\n  \r\n// If we don't need the file anymore we could manually call the removeCallback\r\n// But that is not necessary if we didn't pass the keep option because the library\r\n// will clean after itself.\r\ntmpobj.removeCallback();\r\n```\r\n\r\nNote that this might throw an exception if either the maximum limit of retries\r\nfor creating a temporary name fails, or, in case that you do not have the permission\r\nto write to the directory where the temporary file should be created in.\r\n\r\n### Asynchronous directory creation\r\n\r\nSimple temporary directory creation, it will be removed on process exit.\r\n\r\nIf the directory still contains items on process exit, then it won't be removed.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.dir().then(o => {\r\n  console.log(\"Dir: \", o.path);\r\n  \r\n  // Manual cleanup\r\n  o.cleanup();\r\n});\r\n```\r\n\r\nIf you want to cleanup the directory even when there are entries in it, then\r\nyou can pass the `unsafeCleanup` option when creating it.\r\n\r\nYou can also use a disposer here which takes care of cleanup automatically: \r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.withDir(o => {\r\n  console.log(\"Dir: \", o.path);\r\n  \r\n  // automatic cleanup when the below promise resolves\r\n  return somePromiseReturningFn(); \r\n}).then(v => {\r\n  // the directory has been cleaned here\r\n});\r\n```\r\n\r\n### Synchronous directory creation\r\n\r\nA synchronous version of the above.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\nvar tmpobj = tmp.dirSync();\r\nconsole.log(\"Dir: \", tmpobj.name);\r\n// Manual cleanup\r\ntmpobj.removeCallback();\r\n```\r\n\r\nNote that this might throw an exception if either the maximum limit of retries\r\nfor creating a temporary name fails, or, in case that you do not have the permission\r\nto write to the directory where the temporary directory should be created in.\r\n\r\n### Asynchronous filename generation\r\n\r\nIt is possible with this library to generate a unique filename in the specified\r\ndirectory.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.tmpName().then(path => {\r\n    console.log(\"Created temporary filename: \", path);\r\n});\r\n```\r\n\r\n### Synchronous filename generation\r\n\r\nA synchronous version of the above.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\nvar name = tmp.tmpNameSync();\r\nconsole.log(\"Created temporary filename: \", name);\r\n```\r\n\r\n## Advanced usage\r\n\r\n### Asynchronous file creation\r\n\r\nCreates a file with mode `0644`, prefix will be `prefix-` and postfix will be `.txt`.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.file({ mode: 0644, prefix: 'prefix-', postfix: '.txt' }).then(o => {\r\n  console.log(\"File: \", o.path);\r\n  console.log(\"Filedescriptor: \", o.fd); \r\n});\r\n```\r\n\r\n### Synchronous file creation\r\n\r\nA synchronous version of the above.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\nvar tmpobj = tmp.fileSync({ mode: 0644, prefix: 'prefix-', postfix: '.txt' });\r\nconsole.log(\"File: \", tmpobj.name);\r\nconsole.log(\"Filedescriptor: \", tmpobj.fd);\r\n```\r\n\r\n### Asynchronous directory creation\r\n\r\nCreates a directory with mode `0755`, prefix will be `myTmpDir_`.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.dir({ mode: 0750, prefix: 'myTmpDir_' }).then(o => {\r\n  console.log(\"Dir: \", o.path);\r\n});\r\n```\r\n\r\n### Synchronous directory creation\r\n\r\nAgain, a synchronous version of the above.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\nvar tmpobj = tmp.dirSync({ mode: 0750, prefix: 'myTmpDir_' });\r\nconsole.log(\"Dir: \", tmpobj.name);\r\n```\r\n\r\n\r\n### mkstemp like, asynchronously\r\n\r\nCreates a new temporary directory with mode `0700` and filename like `/tmp/tmp-nk2J1u`.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\ntmp.dir({ template: '/tmp/tmp-XXXXXX' }).then(console.log);\r\n```\r\n\r\n\r\n### mkstemp like, synchronously\r\n\r\nThis will behave similarly to the asynchronous version.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\nvar tmpobj = tmp.dirSync({ template: '/tmp/tmp-XXXXXX' });\r\nconsole.log(\"Dir: \", tmpobj.name);\r\n```\r\n\r\n### Asynchronous filename generation\r\n\r\nThe `tmpName()` function accepts the `prefix`, `postfix`, `dir`, etc. parameters also:\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\n\r\ntmp.tmpName({ template: '/tmp/tmp-XXXXXX' }).then(path =>\r\n    console.log(\"Created temporary filename: \", path);\r\n);\r\n```\r\n\r\n### Synchronous filename generation\r\n\r\nThe `tmpNameSync()` function works similarly to `tmpName()`.\r\n\r\n```javascript\r\nvar tmp = require('tmp-promise');\r\nvar tmpname = tmp.tmpNameSync({ template: '/tmp/tmp-XXXXXX' });\r\nconsole.log(\"Created temporary filename: \", tmpname);\r\n```\r\n\r\n\r\n## Graceful cleanup\r\n\r\nOne may want to cleanup the temporary files even when an uncaught exception\r\noccurs. To enforce this, you can call the `setGracefulCleanup()` method:\r\n\r\n```javascript\r\nvar tmp = require('tmp');\r\n\r\ntmp.setGracefulCleanup();\r\n```\r\n\r\n## Options\r\n\r\nAll options are optional :)\r\n\r\n  * `mode`: the file mode to create with, it fallbacks to `0600` on file creation and `0700` on directory creation\r\n  * `prefix`: the optional prefix, fallbacks to `tmp-` if not provided\r\n  * `postfix`: the optional postfix, fallbacks to `.tmp` on file creation\r\n  * `template`: [`mkstemp`][3] like filename template, no default\r\n  * `dir`: the optional temporary directory, fallbacks to system default (guesses from environment)\r\n  * `tries`: how many times should the function try to get a unique filename before giving up, default `3`\r\n  * `keep`: signals that the temporary file or directory should not be deleted on exit, default is `false`, means delete\r\n    * Please keep in mind that it is recommended in this case to call the provided `cleanupCallback` function manually.\r\n  * `unsafeCleanup`: recursively removes the created temporary directory, even when it's not empty. default is `false`\r\n\r\n\r\n\r\n[1]: http://nodejs.org/\r\n[2]: https://www.npmjs.com/browse/depended/tmp\r\n[3]: http://www.kernel.org/doc/man-pages/online/pages/man3/mkstemp.3.html\r\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/benjamingr/tmp-promise/issues"
  },
  "homepage": "https://github.com/benjamingr/tmp-promise#readme",
  "_id": "tmp-promise@1.0.2",
  "_shasum": "3b7b5631d3af6a86bce7a433c2495465c5760fca",
  "_resolved": "https://registry.npmjs.org/tmp-promise/-/tmp-promise-1.0.2.tgz",
  "_from": "https://registry.npmjs.org/tmp-promise/-/tmp-promise-1.0.2.tgz"
}
